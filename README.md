## Team-1575H

Throughout the year my code had three flywheel control methods and some minor changes throughout driver control and autonomous that let us do some more fine work.
Originally we used slew rate (which we kept the stepper for all year) and some basic tuning. We had the ability to pulse a higher speed to aid recovery and let us fire faster.
Next came TBH. My original TBH was horribly clunky and had logic errors which caused us to have some issues with oscillations after about 4 shots. This is what I called TBH flawless, which was based off of Jpearman's original TBH code, but added Feedforward to reduce overshoot and had motor protection through the original slew rate code.

The delay on spin down used to be larger, but after we added a ratcheting gear to the system, it was lowered to let us spin down quicker.
One cool trick we had was CompRPM, which used a complementary filter between an IME behind the ratchet, and a Quad in 5:1 step down from the flywheel in a moving average to get a more accurate reading. The IME read faster and was more stable, but was less accurate on the actual rate of the wheel. The Quad was very quick at reading and would catch the greatest drops in RPM within about 10rpm (i work at around 2300RPM), but had serious noise issues even when averaged. Combining portions of the two gave more accurate reading of drops in energy and more consistent readings when stabilizing. We ultimately switched finally to Bangbang for the extra fire rate, and did not use the CompRPM variable because the IME would sometimes not initialize and cause the RPM to read about 600 below target at 127 (We had 1:35).
